<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../layouts/header-layout.html">
<link rel="import" href="../components/user-auth/user-auth.html" />
<link rel="import" href="../components/table-list/table-list.html" />
<link rel="import" href="../components/webdis-chat/webdis-chat.html" />
<link rel="import" href="../components/space-instructor/space-instructor.html" />

<polymer-element name="instructor-page" noscript>
  <template>
    <header-layout header="Instructor">
      <user-auth id="instructor"></user-auth>
      <template if="{{ $.instructor.loggedIn }}">
        <style>
          div {
            float: left;
            width: 58%;
          }
          webdis-chat {
            float: right;
            width: 42%;
            height: 100%;
            display: block;
          }
        </style>

        <core-ajax
          id="getInstructorStatus"
          url="{{ $.config.backendUrl }}/spaces/{{ space }}/instructor-status",
          method="GET"
          contentType="application/json"
          handleAs="json"
          on-core-response="{{ setOtherInstructorStatus }}">
        </core-ajax>

        <template if="{{ noInstructorOrConfirmed }}">
          <div>
            <space-instructor space="{{ $.instructor.space }}" language="{{ $.instructor.language }}"></space-instructor>
            <table-list space="{{ $.instructor.space }}"></table-list>
          </div>
        </template>
        <webdis-chat space="{{ $.instructor.space }}" isAdmin="true"></webdis-chat>
      </template>
    </header-layout>
  </template>
</polymer-element>
